"use strict";
/*!
 * Bootstrap-multiselect v1.1.0
 * Author: Henry Dai
 * Website: http://bootstrapmultiselect.blogspot.ca/2017/06/bootstrap-multi-select-plugin-purpose.html
 * Contact: daihong391@gmail.com
 *
 * Copyright 2017-2019 bootstrap-multiselect
 * Licensed under MIT
 */
if(jQuery==="undefined")throw new Error("MultiSelect' requires jQuery");if(!(typeof $().modal=="function"))throw new Error("MultiSelect' requires bootstrap");String.prototype.supplant||(String.prototype.supplant=function(n){return this.replace(/{([^{}]*)}/g,function(t,i){var r=n[i];return typeof r=="string"||typeof r=="number"?r:t})}),function(n){n.fn.multiSelect=function(i){var r=this;if(!r.length)return"no elements to process";(i||(i={}),typeof i!="string"||(i==="onClose"&&r.each(function(t,i){n.multiSelect.elements[n(i).attr("data-msid")].onClose()}),i==="clear"&&r.each(function(t,i){n.multiSelect.elements[n(i).attr("data-msid")].clear()}),i==="hide"&&r.each(function(t,i){n.multiSelect.elements[n(i).attr("data-msid")].hide()}),n.inArray(i,["clear","hide"])===-1))&&r.each(function(r,u){var f=n(u),e,o;if(f[0].tagName!="SELECT")return console.warn("Sorry, cannot initialized a "+f[0].tagName+" element"),!0;f.attr("data-msid")!==undefined&&console.error("This element has already initialized");e=Math.floor(Math.random()*999999);f.attr("data-msid",e);o=new t(u,i);n.multiSelect.elements[e]=o})};var t=function(t,i){this.$e=n(t);this.$id=this.$e.data("msid");this.isMultiple=this.$e.attr("multiple")?!0:!1;this.isHidden=this.$e.is(":visible")?!1:!0;n.extend(this,i);this.init()};t.prototype={init:function(){this._extractOptions();this._buildHtml();this._updateButtonContent();this._bindEvents()},_bindEvents:function(){var t=this;this.$c.find(".multiSelect-control").on("click",function(){t.isMultiple?n(this).hasClass("selected")?(n(this).removeClass("selected"),n(this).find(".glyphicon").removeClass("glyphicon-check"),n(this).find(".glyphicon").addClass("glyphicon-unchecked")):(n(this).addClass("selected"),n(this).find(".glyphicon").addClass("glyphicon-check"),n(this).find(".glyphicon").removeClass("glyphicon-unchecked")):(n(this).hasClass("selected")||(n(this).addClass("selected"),n(this).find(".glyphicon").addClass("glyphicon-check"),n(this).find(".glyphicon").removeClass("glyphicon-unchecked")),n(this).siblings().removeClass("selected"),n(this).siblings().find(".glyphicon").removeClass("glyphicon-check"),n(this).siblings().find(".glyphicon").addClass("glyphicon-unchecked"))});this.$c.find(".multiSelect-saveBtn").on("click",function(){var i=[],r=[];t.$c.find(".selected").each(function(t,u){i.push({value:n(u).data("value"),text:u.text});r.push(n(u).data("value"))});t.$selectOptions=i;t.$e.val(r);t._updateBtn();typeof t.onClose=="function"&&t.onClose();t.$c.modal("hide")});this.$triggerElement.on("click",function(){t._syncR()})},_syncR:function(){var t=this,i=t.$e.val()!==null?t.$e.val():[];this.$c.find(".multiSelect-control").each(function(){n.inArray(n(this).data("value"),i)!==-1?(n(this).addClass("selected"),n(this).find(".glyphicon").addClass("glyphicon-check"),n(this).find(".glyphicon").removeClass("glyphicon-unchecked")):(n(this).removeClass("selected"),n(this).find(".glyphicon").removeClass("glyphicon-check"),n(this).find(".glyphicon").addClass("glyphicon-unchecked"))})},_updateBtn:function(){var n=this.$selectOptions.length;this.isMultiple?n?n===1?this.$triggerElement.find(".text").text("1 item Selected"):this.$triggerElement.find(".text").text(n+" items Selected"):this.$triggerElement.find(".text").text("None Selected"):n?this.$triggerElement.find(".text").text(this.$selectOptions[0].text):this.$triggerElement.find(".text").text("None Selected")},_buildHtml:function(){var i,t,r;this.isMultiple||this.$e.first()[0].insertBefore(n("<option selected>None Selected<\/option>")[0],this.$e.first()[0][0]);i="";this.width!==undefined&&(i=this.width);this.$e.before('<button style="float:none; width:'+i+';" type="button" class="btn btn-default col-xs-7 col-md-4" data-toggle="modal" data-target="#multiSelect_'+this.$id+'"><span class="text"><\/span> <span class="caret pull-right"><\/span><\/button>');this.$triggerElement=this.$e.prev();this.isHidden&&this.$triggerElement.hide();this.$e.hide();this.$selectOptions=[];t="";this.title!==undefined&&(t=this.title);this.isMultiple?t===""&&(t="Please select options"):t===""&&(t=n.fn.multiSelect.defaults.title);r=n.fn.multiSelect.defaults.template.supplant({id:"multiSelect_"+this.$id,title:t,Cancel:n.fn.multiSelect.defaults.buttonCancel,Save:n.fn.multiSelect.defaults.buttonSave});this.$c=n(r).appendTo(n("body"));this.$multiList=this.$c.find(".multiListContainer");this._appendOptionsList()},_appendOptionsList:function(){this.$multiList.html("");var t=this;n.each(this.options,function(n,i){t.$multiList.append('<a href="#" class="form-control form-group multiSelect-control" data-value="'+i.value+'"><span class="glyphicon mr-2"><\/span>'+i.text+"<\/a>")})},_extractOptions:function(){var t=[];n.each(this.$e.find("option"),function(n,i){t.push({value:i.value,text:i.text})});this.options=t},clear:function(){this.$e.val("");this.$triggerElement.find(".text").text("None Selected");this.$c.find(".multiSelect-control").removeClass("selected");this.$c.find(".glyphicon").removeClass("glyphicon-check");this.$c.find(".glyphicon").addClass("glyphicon-unchecked")},hide:function(){this.$triggerElement.hide()},_setTitle:function(n){this.$c.find(".modal-title").text(n)},_updateButtonContent:function(){var n=this.$triggerElement.next().find("option:selected");this.isMultiple?n.length===0?this.$triggerElement.find(".text").text("None Selected"):n.length===1?this.$triggerElement.find(".text").text(n.length+" item selected"):this.$triggerElement.find(".text").text(n.length+" items selected"):this.$e.val()===""?this.$triggerElement.find(".text").text("None Selected"):this.$triggerElement.find(".text").text(this.$e.val())}};n.multiSelect={elements:{},animation:[]};n.fn.multiSelect.defaults={template:'<div class="modal fade" id="{id}" data-backdrop="static" data-keyboard="false"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">{title}<\/h5><\/div><div class="modal-body"><div class="multiListContainer"><\/div><\/div><div class="modal-footer" style="margin-top: 0;"><button type="button" class="btn btn-secondary" data-dismiss="modal">{Cancel}<\/button><button type="button" class="btn btn-primary multiSelect-saveBtn">{Save}<\/button><\/div><\/div><\/div><\/div>',title:"Select an option",buttonSave:"Save",buttonCancel:"Cancel",onOpen:function(){},onClose:function(){}}}(jQuery);